!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.simpleDOM=e():t.simpleDOM=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r={};r.nodes=n(1),r.parse=n(21),t.exports=r},function(t,e,n){var r={};r.Node=n(2),r.NodeWithChild=n(4),r.Tag=n(5),r.Fragment=n(6),r.Comment=n(19),r.Text=n(20),t.exports=r},function(t,e,n){var r=n(3),o=r.createClass({type:null,parentNode:null,_processingSelfAppend:function(t){var e=this;e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,t.childNodes.push(e)}});t.exports=o},function(t,e){function n(t,e,n){for(var r in t)!t.hasOwnProperty(r)||n&&!n(r)||(e[r]=t[r]);return e}function r(t){switch(t){case"init":case"destructor":case"__Constructor":case"construct":return!1}return!0}function o(t,e){for(var n=0,r=t.length;r>n;n+=1)e.push(t[n]);return e}function i(t){return 0!==t.length}function a(){function t(){var t=this,e=t.__Constructor.__inits;if(e)for(var n=0,r=e.length;r>n;n+=1)e[n].apply(t,arguments);return t.construct&&t.construct.apply(t,arguments),t}return t.__cmId=m,t.prototype.__Constructor=t,m+=1,t}function s(){var t=this,e=t.__Constructor.__destructors;if(e)for(var n=e.length;n--;)e[n].apply(t,arguments)}function u(t,e,n){var r=this;r.parent=t,r.settings=e,r.notAutoDestruct=n||!1}function c(t){var e=this;e.base=t,e.__mixinId=m,m+=1}function l(t){return"function"==typeof t}function f(t){return t instanceof u}function p(t){return t instanceof c}function d(t){return!l(t)&&!f(t)&&!p(t)}var g,m=1;if(Array.isArray)g=Array.isArray;else{var h=Object.prototype.toString;g=function(t){return"[object Array]"===h.call(t)}}u.prototype.destructor=function(){var t=this;t.parent=null,t.settings=null},c.prototype.destructor=function(){var t=this;t.base=null,t.__mixinId=null};var _={createClassConstructor:a,ParentConfigurator:u,configureParent:function(t,e,n){return new u(t,e,n)},Mixin:c,createMixin:function(t){return new c(t)},createClass:function(){function t(t,e){t.__classesIds&&o(t.__classesIds,v),t.__cmId&&v.push(t.__cmId),t.__inits&&o(t.__inits,x),t.prototype.init&&e&&e.needInit===!1&&x.pop(),t.__mixinsIds&&o(t.__mixinsIds,y),t.__destructors&&o(t.__destructors,T),t.prototype.destructor&&e&&e.needDestructor===!1&&T.pop(),b=t.prototype}var e,u,c=arguments;c.length>0&&(u=c[c.length-1],d(u)&&(e=u));var g,m,h,_,b=null,v=[],y=[],x=[],T=[];for(m=0,h=c.length;h>m;m+=1)_=c[m],l(_)?t(_):f(_)?(t(_.parent,_.settings),_.notAutoDestruct||_.destructor()):p(_)&&(y.push(_.__mixinId),b=_.base),b&&(g||(g={}),n(b,g,r),b=null);g&&(e&&n(e,g),e=g);var A=a();e&&(A.prototype=e);var C=A.prototype;return C.__Constructor=A,v.push(A.__cmId),C.destructor&&T.push(C.destructor),C.init&&x.push(C.init),A.__classesIds=v,i(y)&&(A.__mixinsIds=y),i(x)&&(A.__inits=x),i(T)&&(A.__destructors=T),C.destructor=s,A},instanceOf:function(t,e){var n=t.__Constructor;if(n){var r=n.__classesIds;if(r)return-1!==r.indexOf(e.__cmId)}return!1},hasMixin:function(t,e){var n=t.__Constructor;if(n){var r=n.__mixinsIds;if(r)return-1!==r.indexOf(e.__mixinId)}return!1},callConstruct:function(t,e,n){var r=e.prototype.construct;return r&&(g(n)?r.apply(t,n):r.call(t,n)),t}};t.exports=_},function(t,e,n){var r=n(3),o=n(2),i=r.createClass(o,{childNodes:null,init:function(){this.childNodes=[]},appendChild:function(t){var e=this;return t._processingSelfAppend(e),e},removeChild:function(t){var e=this;return t.parentNode===e&&(e.childNodes.splice(e.childNodes.indexOf(t),1),t.parentNode=null),e}});t.exports=i},function(t,e,n){var r=n(3),o=n(4),i=r.createClass(o,{type:"tag",init:function(t,e){var n=this;n.name=t,n.attributes=e||{}}});t.exports=i},function(t,e,n){function r(t,e,n,r){t.parentNode=r,r.childNodes.push(t)}var o=n(3),i=n(4),a=n(7).cycle,s=o.createClass(i,{type:"fragment",_processingSelfAppend:function(t){var e=this,n=e.childNodes;return a(n,r,t),n.length=0,e}});t.exports=s},function(t,e,n){var r={};r.getGlobal=n(8),r.typesDetection=n(9),r.getObjectKeys=n(10),r.getObjectLength=n(11),r.getObjectSafely=n(12),r.getObjectFiled=n(15),r.cycleKeys=n(13),r.cycle=n(14),r.reversiveCycle=n(16),r.customEvents=n(17),r.onload=n(18),t.exports=r},function(t,e){(function(e){var n=this.window||e;t.exports=function(){return n}}).call(e,function(){return this}())},function(t,e){function n(t){return function(e){return o.call(e)==="[object "+t+"]"}}var r={},o=Object.prototype.toString;r.isArray=Array.isArray||function(t){return"[object Array]"===o.call(t)},r.isNodesCollection=function(t){return document&&(t instanceof HTMLCollection||t instanceof NodeList)};for(var i=["Object","Arguments","Function","String","Number","Date","RegExp","Error","Boolean"],a=i.length;a--;)r["is"+i[a]]=n(i[a]);r.isCollection=function(t){return r.isArray(t)||r.isNodesCollection(t)||r.isArguments(t)},t.exports=r},function(t,e){var n;n=Object.keys?function(t){return Object.keys(t)}:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},t.exports=n},function(t,e,n){var r=n(10);t.exports=function(t){return r(t).length}},function(t,e,n){var r=n(9),o=n(13),i=n(14);t.exports=function(t,e){return i(arguments,function(e){if(t.hasOwnProperty(e)){if(!r.isObject(t[e]))return t=null,o.stopKey}else t[e]={};t=t[e]},null,null,1,1),t}},function(t,e){function n(){}function r(){this.result=null}r.prototype=new n,t.exports={StopKey:n,stopKey:new n,StopObject:r,stopObject:new r}},function(t,e,n){var r=n(8),o=n(13),i=n(9),a=n(10);t.exports=function(t,e,n,s,u,c){var l,f,p,d,g,m;if(t)if(s=s||r(),u=u||1,l=c||0,i.isString(t))for(f=t.length;f>l&&(d=e.call(s,t.charAt(l),l,t,n),!(d instanceof o.StopKey));l+=u);else if(i.isCollection(t))for(f=t.length;f>l&&(d=e.call(s,t[l],l,t,n),!(d instanceof o.StopKey));l+=u);else if(i.isObject(t))if(0===l&&1===u){for(p in t)if(t.hasOwnProperty(p)&&(d=e.call(s,t[p],p,t,n),d instanceof o.StopKey))break}else for(g=a(t),f=g.length;f>l&&(p=g[l],d=e.call(s,t[p],p,t,n),!(d instanceof o.StopKey));l+=u);return d===o.stopObject?(m=d.result,d.result=null,m):t}},function(t,e){t.exports=function(t,e){var n,r,o,i,a,s,u=typeof e;if(t){for("string"!==u&&"number"!==u?(o=e,n=0):(o=arguments,n=1),r=o.length-1;r>n;n+=1){if(i=t[o[n]],i===s)return null;t=i}if(a=t[o[n]],a!==s)return a}return null}},function(t,e,n){var r=n(8),o=n(13),i=n(9),a=n(10);t.exports=function(t,e,n,s,u,c){var l,f,p,d,g;if(t)if(s=s||r(),u=u||1,i.isString(t))for(l=c||t.length-1;l>=0&&(p=e.call(s,t.charAt(l),l,t,n),!(p instanceof o.StopKey));l-=u);else if(i.isCollection(t))for(l=c||t.length-1;l>=0&&(p=e.call(s,t[l],l,t,n),!(p instanceof o.StopKey));l-=u);else if(i.isObject(t))for(d=a(t),l=c||d.length-1;l>=0&&(f=d[l],p=e.call(s,t[f],f,t,n),!(p instanceof o.StopKey));l-=u);return p===o.stopObject?(g=p.result,p.result=null,g):t}},function(t,e,n){function r(t,e,n,r){t.handlersData.push(e,n,r)}function o(t,e,n,r,o){var a=t.handlersData;p(a,s,{handler:e,ctx:n},null,3),0===a.length&&i(r,o)}function i(t,e){var n=g[t];n[e]&&(n[e]=null,n._quantity-=1,0===n._quantity&&a(t))}function a(t){d.splice(t,1),g.splice(t,1)}function s(t,e,n,r){return t===r.handler&&n[e+1]===r.ctx?(n.splice(e,3),f.stopKey):void 0}function u(t,e,n,r){var o=n[e+2],i=n[e+1]||this;r?o?(r.unshift(o),t.apply(i,r),r.shift()):t.apply(i,r):t.call(i,o)}function c(t,e,n,o){r(o,t,n[e+1],n[e+2])}function l(t,e,n,r){o(r.eventData,t,n[e+1],r.targetIndex,r.eventName)}var f=n(13),p=n(14),d=[],g=[];t.exports={add:function(t,e,n,o,i){var a,s,u=d.indexOf(t);return-1===u?(u=d.push(t),u-=1,a={_quantity:0},g[u]=a):a=g[u],s=a[e],s?s.isDispatching?s.turnForAdding.push(n,o,i):r(s,n,o,i):(a[e]={isDispatching:!1,handlersData:[n,o,i],turnForAdding:[],turnForRemoving:[]},a._quantity+=1),t},remove:function(t,e,n,r){var i,a=d.indexOf(t);return-1!==a&&(i=g[a][e],i.isDispatching?i.turnForRemoving.push(n,r):o(i,n,r,a,e)),t},dispatch:function(t,e,n){var r,o,i=d.indexOf(t);return-1!==i&&(r=g[i][e],r&&!r.isDispatching&&(2!==arguments.length&&(o=Array.prototype.slice.call(arguments,2)),r.isDispatching=!0,p(r.handlersData,u,o,t,3),r.isDispatching=!1,0!==r.turnForAdding.length&&(p(r.turnForAdding,c,r,null,3),r.turnForAdding.length=0),0!==r.turnForRemoving.length&&(p(r.turnForRemoving,l,{eventData:r,eventName:e,targetIndex:i},null,2),r.turnForRemoving.length=0))),t},removeAll:function(t,e){var n=d.indexOf(t);return-1!==n&&(e?i(n,e):a(n)),t}}},function(t,e){t.exports=function(t){t()}},function(t,e,n){var r=n(3),o=n(2),i=r.createClass(o,{type:"comment",init:function(t){this.text=t}});t.exports=i},function(t,e,n){var r=n(3),o=n(2),i=r.createClass(o,{type:"text",init:function(t){this.text=t}});t.exports=i},function(t,e,n){function r(t){var e=this,n=new _.Fragment,r=!1;e.treeStack=[n],e.result=n,e.state=A,e.buffer="",e.textBuffer="",e.tagName="",e.attributeName="",e.attributeValueSeparator="",e.attributeValue="",e.attributes=null,e.commentBuffer="",e.commentToken="",t&&t.isXML&&(r=!0),e.isXMLMode=r}function o(t){return K.test(t)}function i(t){return G.test(t)}function a(t){return P.test(t)}function s(t){return-1!==U.indexOf(t)}function u(t,e){t.buffer+=e}function c(t){t.textBuffer=t.buffer,t.state=A}function l(t,e){var n,r=t.attributes;r||(t.attributes=r={}),r[t.attributeName]=e!==n?e:t.attributeValue}function f(t){var e,n;t.textBuffer&&(e=t.treeStack,n=new _.Text(t.textBuffer),e[e.length-1].appendChild(n),t.textBuffer=""),t.buffer=""}function p(t,e){var n,r=t.treeStack,o=t.tagName;f(t),n=new _.Tag(o,t.attributes),r[r.length-1].appendChild(n),e||!t.isXMLMode&&s(o)||r.push(n),t.state=A}function d(t,e,n,r){r.appendChild(t)}function g(t){var e,n,r=t.tagName,o=t.treeStack,i=!1;for(f(t);1!==o.length&&(e=o.pop()).name!==r;)i||(i=!0,n=[]),n.push(e);i&&b(n,d,e),t.state=A}function m(t){var e,n=t.treeStack;f(t),e=new _.Comment(t.commentBuffer),n[n.length-1].appendChild(e),t.state=A}function h(t){""!==t.buffer&&(t.textBuffer=t.buffer,f(t))}var _=n(1),b=n(7).reversiveCycle,v=n(22),y=n(7).getObjectSafely,x=y(v.exports,"simpleDOM").parse={},T=0,A=T++,C=T++,N=T++,S=T++,O=T++,k=T++,D=T++,E=T++,B=T++,w=T++,I=T++,M=T++,j=T++,F=T++,L=T++,R=T++,V=T++;x.states={TEXT:A,TAG_START:C,TAG_NAME:N,TAG_BODY:S,TAG_CLOSE:O,TAG_ATTRIBUTE_NAME:k,TAG_ATTRIBUTE_TO_VALUE:D,TAG_ATTRIBUTE_VALUE:E,TAG_ATTRIBUTE_VALUE_END:B,CLOSED_TAG_START:w,CLOSED_TAG_NAME:I,CLOSED_TAG_BODY:M,DECLARATION_START:j,COMMENT_START:F,COMMENT_BODY:L,COMMENT_END:R,COMMENT_CLOSE:V},r.prototype.destructor=function(){var t=this;t.treeStack=null,t.result=null,t.state=null,t.buffer=null,t.textBuffer=null,t.tagName=null,t.attributeName=null,t.attributeValueSeparator=null,t.attributeValue=null,t.attributes=null,t.commentBuffer=null,t.commentToken=null},x.ContextOfParse=r;var K=/[A-Za-z]/,G=/\w|-|:/,P=/\s/,U=["img","input","br","hr","link","meta","source","area","embed","param","base","col","command"],q=o,X=i,Y=x.microehelpers={};Y.isCorrectTagNameStartSymbol=o,Y.isCorrectTagNameSymbol=i,Y.isWhiteSpace=a,Y.isSingletonHTMLTag=s,Y.isCorrectAttributeNameStartSymbol=q,Y.isCorrectAttributeNameSymbol=X,Y.addCharForBuffer=u,Y.clearForTextState=c,Y.addAttribute=l;var H=x.builders={};H.buildText=f,H.buildTag=p,H.closeTag=g,H.buildComment=m;var W=[],z=x.processings={};W[A]=function(t,e){switch(u(t,e),e){case"<":t.state=C;break;default:t.textBuffer+=e}},z.processingText=W[A],W[C]=function(t,e){if(u(t,e),o(e))t.state=N,t.tagName=e,t.attributes=null;else switch(e){case"/":t.state=w;break;case"!":t.state=j;break;default:c(t)}},z.processingTagStart=W[C],W[N]=function(t,e){if(u(t,e),i(e))t.tagName+=e;else if(a(e))t.state=S;else switch(e){case"/":t.state=O;break;case">":t.state=A,p(t);break;default:c(t)}},z.processingTagName=W[N],W[S]=function(t,e){if(u(t,e),!a(e))if(q(e))t.state=k,t.attributeName=e;else switch(e){case"/":t.state=O;break;case">":p(t);break;default:c(t)}},z.processingTagBody=W[S],W[k]=function(t,e){switch(u(t,e),e){case"=":t.state=D;break;case">":l(t,""),p(t);break;case"/":l(t,""),t.state=O;break;default:X(e)?t.attributeName+=e:a(e)?(l(t,""),t.state=S):c(t)}},z.processingTagAttributeName=W[k],W[D]=function(t,e){switch(u(t,e),e){case"'":case'"':t.state=E,t.attributeValueSeparator=e,t.attributeValue="";break;default:c(t)}},z.processingTagAttributeToValue=W[D],W[E]=function(t,e){u(t,e),e===t.attributeValueSeparator?(t.state=B,l(t)):t.attributeValue+=e},z.processingTagAttributeValue=W[E],W[B]=function(t,e){switch(u(t,e),e){case"/":t.state=O;break;case">":p(t),c(t);break;default:a(e)?t.state=S:c(t)}},z.processingAttributeValueEnd=W[B],W[O]=function(t,e){">"===e?p(t,!0):(u(t,e),c(t))},z.processingTagClose=W[O],W[w]=function(t,e){u(t,e),o(e)?(t.tagName=e,t.state=I):c(t)},z.processingClosedTagStart=W[w],W[I]=function(t,e){u(t,e),o(e)?t.tagName+=e:">"===e?g(t):a(e)?t.state=M:c(t)},z.processingClosedTagName=W[I],W[M]=function(t,e){u(t,e),">"===e?g(t):a(e)||c(t)},z.processingClosedTagBody=W[M],W[j]=function(t,e){u(t,e),"-"===e?t.state=F:c(t)},z.processingDeclarationStart=W[j],W[F]=function(t,e){u(t,e),"-"===e?(t.state=L,t.commentBuffer=""):c(t)},z.processingCommentStart=W[F],W[L]=function(t,e){u(t,e),"-"===e?(t.state=R,t.commentToken=e):t.commentBuffer+=e},z.processingCommentBody=W[L],W[R]=function(t,e){u(t,e),"-"===e?(t.state=V,t.commentToken+=e):(t.state=L,t.commentBuffer+=t.commentToken+e)},z.processingCommentEnd=W[R],W[V]=function(t,e){">"===e?m(t):(u(t,e),t.state=L,t.commentBuffer+=t.commentToken+e)},z.processingCommentClose=W[V],z.processingResultState=h,t.exports=function(t){for(var e,n=new r,o=0,i=t.length;i>o;o+=1)W[n.state](n,t.charAt(o));return h(n),e=n.result,n.destructor(),e}},function(t,e,n){var r={};r.exports={},r.utils={},r.utils.createTag=n(23),t.exports=r},function(t,e,n){var r=n(7).cycle,o=["img","input","br","hr","link","meta","source","area","embed","param","base","col","command"];t.exports=function(t,e,n){var i,a="",s="";return e&&r(e,function(t,e){a+=" "+e+'="'+t+'"'}),-1===o.indexOf(t)?(n&&r(arguments,function(t){s+=t},null,null,1,2),i="<"+t+a+">"+s+"</"+t+">"):i="<"+t+a+" />",i}}])});